<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hospital File Quotation</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    label {
      font-weight: bold;
      margin-top: 15px;
      display: block;
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .flex-row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    .flex-row > div {
      flex: 1;
    }
    .size-boxes {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    .size-box {
      padding: 10px;
      border: 2px solid #ccc;
      border-radius: 5px;
      min-width: 100px;
      text-align: center;
      cursor: pointer;
    }
    .size-box.green {
      border-color: green;
      background: #e6ffe6;
    }
    .size-box.yellow {
      border-color: orange;
      background: #fff8e1;
    }
    .result, .board-summary {
      margin-top: 20px;
      padding: 15px;
      border: 2px dashed #4caf50;
      background: #f1fff1;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Hospital File Quotation</h2>
    <div class="flex-row">
      <div>
        <label>Unit</label>
        <select id="unit">
          <option>Inches</option>
        </select>
      </div>
      <div>
        <label>Length</label>
        <input type="number" id="length" value="20">
      </div>
      <div>
        <label>Width</label>
        <input type="number" id="width" value="17">
      </div>
      <div>
        <label>Quantity</label>
        <input type="number" id="quantity" value="1">
      </div>
    </div>

    <label>1. Design</label>
    <input type="number" id="design" value="0">

    <label>2. Board</label>
    <select id="boardType">
      <option>Art Card</option>
      <option>DuplexBoard</option>
      <option>Cyber XL</option>
    </select>
    <select id="gsm">
      <option>200 GSM</option>
      <option>250 GSM</option>
      <option>300 GSM</option>
      <option>350 GSM</option>
      <option>400 GSM</option>
    </select>
    <select id="boardSize"></select>

    <label>Board Rate Per Sheet (₹)</label>
    <input type="number" id="boardRate" value="0">

    <div class="size-boxes" id="sizeBoxes"></div>

    <div class="board-summary" id="boardSummary"></div>

    <label>3. Printing</label>
    <input type="number" id="printing" value="0">

    <label>4. Lamination</label>
    <input type="number" id="lamination" value="0">

    <label>5. Die</label>
    <input type="number" id="die" value="0">

    <label>6. Punching</label>
    <input type="number" id="punching" value="0">

    <label>7. Pasting</label>
    <input type="number" id="pasting" value="0">

    <button onclick="calculateTotal()">Calculate</button>

    <div class="result" id="totalResult">Total: ₹0.00</div>
  </div>

<script>
const boardSizes = {
  'Art Card': ['30x40', '23x36', '25x36', '22x28'],
  'Cyber XL': ['22x28', '23x30', '23x36', '25x36', '20x30', '31.5x41.5', '25x30'],
  'DuplexBoard': ['23x36', '25x36', '22x28']
};

function populateSizes() {
  const board = document.getElementById('boardType').value;
  const sizeDropdown = document.getElementById('boardSize');
  sizeDropdown.innerHTML = '';
  boardSizes[board].forEach(size => {
    const option = document.createElement('option');
    option.textContent = size;
    sizeDropdown.appendChild(option);
  });
  renderBoxes();
}

document.getElementById('boardType').addEventListener('change', populateSizes);
window.onload = populateSizes;

function renderBoxes() {
  const length = parseFloat(document.getElementById('length').value);
  const width = parseFloat(document.getElementById('width').value);
  const board = document.getElementById('boardType').value;
  const sizes = boardSizes[board];
  const container = document.getElementById('sizeBoxes');
  container.innerHTML = '';

  let minWaste = Infinity;
  let bestBox = null;
  let boxes = [];

  sizes.forEach(size => {
    const [bW, bL] = size.split('x').map(parseFloat);
    const fitL = Math.floor(bL / length);
    const fitW = Math.floor(bW / width);
    const total = fitL * fitW;
    const used = fitL * length * fitW * width;
    const waste = (bL * bW) - used;

    boxes.push({size, total, waste});

    if (waste < minWaste && total > 0) {
      minWaste = waste;
      bestBox = size;
    }
  });

  boxes.forEach(({size, total, waste}) => {
    const box = document.createElement('div');
    box.className = 'size-box';
    if (size === bestBox) box.classList.add('green');
    box.innerHTML = `<strong>${size}</strong><br>Fits: ${total}<br>Waste: ${waste.toFixed(2)} in²`;
    box.onclick = () => showBoardSummary(size, total, waste);
    container.appendChild(box);
  });

  showBoardSummary(bestBox, boxes.find(b => b.size === bestBox).total, minWaste);
}

function showBoardSummary(size, fitCount, waste) {
  const qty = parseInt(document.getElementById('quantity').value);
  const sheets = Math.ceil(qty / fitCount);
  const rate = parseFloat(document.getElementById('boardRate').value);
  const boardCost = sheets * rate;
  document.getElementById('boardSummary').innerHTML = `
    <strong>Best Size:</strong> ${size}<br>
    <strong>Fits per Sheet:</strong> ${fitCount}<br>
    <strong>Sheets Required:</strong> ${sheets}<br>
    <strong>Wastage:</strong> ${waste.toFixed(2)} in²<br>
    <strong>Board Total:</strong> ₹${boardCost.toFixed(2)}
  `;
  document.getElementById('boardSummary').setAttribute('data-cost', boardCost);
}

function calculateTotal() {
  const design = parseFloat(document.getElementById('design').value);
  const printing = parseFloat(document.getElementById('printing').value);
  const lamination = parseFloat(document.getElementById('lamination').value);
  const die = parseFloat(document.getElementById('die').value);
  const punching = parseFloat(document.getElementById('punching').value);
  const pasting = parseFloat(document.getElementById('pasting').value);
  const boardCost = parseFloat(document.getElementById('boardSummary').getAttribute('data-cost')) || 0;

  const total = design + printing + lamination + die + punching + pasting + boardCost;
  document.getElementById('totalResult').textContent = `Total: ₹${total.toFixed(2)}`;
}
</script>
</body>
</html>
